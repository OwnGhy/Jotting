## 操作系统进程线程面试题总结
1. 以下多线程对int型变量x的操作，哪几个需要进行同步： 　　　　
A. x=y;      B. x++;    C. ++x;    D. x=1;
答案是ＡＢＣ，y的写入与x读y要同步，x++和++x都要知道x之前的值，所以也要同步。

2. 多线程中栈与堆是公有的还是私有的
　　　　A：栈公有, 堆私有
　　　　B：栈公有，堆公有
　　　　C：栈私有, 堆公有
　　　　D：栈私有，堆私有
答案是C,栈一般存放局部变量，而程序员一般自己申请和释放堆中的数据。

3. 两个线程并发执行（代码段都是ThreadProc)，问两个线程都结束后，a取值范围。
```
int a = 0;//global
void ThreadProc()
{
  　　　　 for(inti = 1; i <= 50; i++)
        　　  a += 1;
}
```
当两线程串行时，结果最大为100，当某个线程运行结束，而此时另外一个线程刚取出0，还未计算时，结果最小为50。
参考于：http://www.cnblogs.com/wuchanming/p/3992395.html?utm_source=tuicool&utm_medium=referral

4. 进程之间的通信方式IPC：管道、共享内存、套接字、信号量、消息排队

5. 线程之间的通信方式：锁机制、信号量机制、信号机制
     
        线程间的通信目的主要是用于线程同步，所以线程没有像进程通信中的用于数据交换的通信机制。

6. 线程进程定义
进程是资源分配的基本单位，有独立的地址空间。
线程是资源调度运行的最小单位。线程是拥有自己的局部变量和栈，线程之间共享堆。

7. 线程之间如何共享进程的资源？
它们之间共享大部分数据，使用相同的地址空间。线程是拥有自己的局部变量和栈，线程之间共享堆。并且通过共享数据（全局变量、静态变量）实现线程之间的通信。

8. 什么是线程安全？
如果你的代码在多线程下执行和在单线程下执行永远都能获得一样的结果，那么你的代码就是线程安全的。

9. 下列代码执行结果？
```
var t = true;
window.setTimeout(function (){
    t = false;
},1000);
while (t){}
alert('end');
```
万万没想到的是结果是进入死循环。这里涉及的知识点是JS的异步任务与单线程。参考知乎回答https://www.zhihu.com/question/21475411/answer/188678456
在JavaScript中任务有两种，一种是同步任务，一种是异步任务。
同步任务：各个任务按照文档定义的顺序一一推入"执行栈"中，当前一个任务执行完毕，才会开始执行下一个任务。
异步任务：各个任务推入"任务队列"中，只有在当前的所有同步任务执行完毕，才会将队列中的任务"出队"执行。（注：这里的异步任务并不一定是按照文档定义的顺序推入队列中）。
如下列所示：
```
//第一个推入队列中
setTimeout(function(){
  console.log("1");
},0);
//第三个推入队列中
setTimeout(function(){
 console.log("2");
},1000);
//第二个推入队列中
setTimeout(function(){
  console.log("3");
},0);
 //第一个推入执行栈中
console.log('4')
```
最后的执行结果是4、1、3、2，其原理就是先将同步任务推入执行栈，将异步任务推入任务队列，当执行栈中的同步任务完成之后再调用任务队列中的异步任务。
所以这里会跳过异步任务setTimeout而进入死循环。

10. 在用户空间实现线程，其最大的优点是什么？最大的缺点是什么？

答：最大的优势就是效率。不需要陷入内核来切换线程。最大的缺点是，如果一个线程阻塞，整个进程都会阻塞。

11. 一个快餐店有四类雇员：(1) 领班，接收顿客点的菜单；（2）厨师，准备饭菜；（3）打包工，将饭菜装在袋子里；（4) 收银员，将食品袋交给顾客并收钱。每个雇员可被看作一个进行通信的顺序进程。它们采用的进程间通信方式是什么？请将这个模型与UNIX中进程联系起来。

答：雇员之间通过消息传递进行通信：在该例中，消息为订单、食物和袋子。在UNIX中，该4个进程通过管道连接。

 

12. 假设有一个使用信箱的消息传递系统，当向满信箱发消息或从空信箱收消息时，进程都不会阻塞，相反，会得到一个错误代码。进程响应错误代码的处理方式为一遍一遍地重试，直到成功为止。这种方式会导致竞争条件吗？

答：它不会导致竞争条件（不会丢失任何东西），不过它是完全的忙等待。